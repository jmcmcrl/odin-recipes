!function(){"use strict";function t(){}function e(t){return t()}function n(){return Object.create(null)}function o(t){t.forEach(e)}function r(t){return"function"==typeof t}function i(t,e){return t!=t?e==e:t!==e||t&&"object"==typeof t||"function"==typeof t}function a(t,e){t.appendChild(e)}function s(t,e,n){t.insertBefore(e,n||null)}function c(t){t.parentNode&&t.parentNode.removeChild(t)}function l(t){return document.createElement(t)}function u(t){return document.createTextNode(t)}function d(t,e,n,o){return t.addEventListener(e,n,o),()=>t.removeEventListener(e,n,o)}function h(t,e,n){null==n?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function p(t,e,n){e in t?t[e]="boolean"==typeof t[e]&&""===n||n:h(t,e,n)}function f(t){const e={};for(const n of t)e[n.name]=n.value;return e}let m;function b(t){m=t}const g=[],E=[];let _=[];const $=[],x=Promise.resolve();let N=!1;function y(t){_.push(t)}const C=new Set;let T=0;function A(){if(0!==T)return;const t=m;do{try{for(;T<g.length;){const t=g[T];T++,b(t),O(t.$$)}}catch(t){throw g.length=0,T=0,t}for(b(null),g.length=0,T=0;E.length;)E.pop()();for(let t=0;t<_.length;t+=1){const e=_[t];C.has(e)||(C.add(e),e())}_.length=0}while(g.length);for(;$.length;)$.pop()();N=!1,C.clear(),b(t)}function O(t){if(null!==t.fragment){t.update(),o(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(y)}}const v=new Set;function I(t,e){const n=t.$$;null!==n.fragment&&(!function(t){const e=[],n=[];_.forEach((o=>-1===t.indexOf(o)?e.push(o):n.push(o))),n.forEach((t=>t())),_=e}(n.after_update),o(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function w(t,e){-1===t.$$.dirty[0]&&(g.push(t),N||(N=!0,x.then(A)),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function S(i,a,s,l,u,d,h,p=[-1]){const f=m;b(i);const g=i.$$={fragment:null,ctx:[],props:d,update:t,not_equal:u,bound:n(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(a.context||(f?f.$$.context:[])),callbacks:n(),dirty:p,skip_bound:!1,root:a.target||f.$$.root};h&&h(g.root);let E=!1;if(g.ctx=s?s(i,a.props||{},((t,e,...n)=>{const o=n.length?n[0]:e;return g.ctx&&u(g.ctx[t],g.ctx[t]=o)&&(!g.skip_bound&&g.bound[t]&&g.bound[t](o),E&&w(i,t)),e})):[],g.update(),E=!0,o(g.before_update),g.fragment=!!l&&l(g.ctx),a.target){if(a.hydrate){const t=function(t){return Array.from(t.childNodes)}(a.target);g.fragment&&g.fragment.l(t),t.forEach(c)}else g.fragment&&g.fragment.c();a.intro&&((_=i.$$.fragment)&&_.i&&(v.delete(_),_.i($))),function(t,n,i,a){const{fragment:s,after_update:c}=t.$$;s&&s.m(n,i),a||y((()=>{const n=t.$$.on_mount.map(e).filter(r);t.$$.on_destroy?t.$$.on_destroy.push(...n):o(n),t.$$.on_mount=[]})),c.forEach(y)}(i,a.target,a.anchor,a.customElement),A()}var _,$;b(f)}let M;"function"==typeof HTMLElement&&(M=class extends HTMLElement{constructor(){super(),this.attachShadow({mode:"open"})}connectedCallback(){const{on_mount:t}=this.$$;this.$$.on_disconnect=t.map(e).filter(r);for(const t in this.$$.slotted)this.appendChild(this.$$.slotted[t])}attributeChangedCallback(t,e,n){this[t]=n}disconnectedCallback(){o(this.$$.on_disconnect)}$destroy(){I(this,1),this.$destroy=t}$on(e,n){if(!r(n))return t;const o=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return o.push(n),()=>{const t=o.indexOf(n);-1!==t&&o.splice(t,1)}}$set(t){var e;this.$$set&&(e=t,0!==Object.keys(e).length)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}});const R="THEME_CONFIG_COLOR_PRIMARY",H="THEME_CONFIG_COLOR_SECONDARY",L="THEME_CONFIG_CTA_BORDER_RADIUS",F="THEME_CONFIG_CTA_FONT_SIZE",G="THEME_CONFIG_CTA_PADDING",k="THEME_CONFIG_CTA_MARGIN",D="THEME_CONFIG_CTA_HEIGHT",B="THEME_CONFIG_CONTAINER_CLASS_NAME",P="THEME_CONFIG_SHARE_CTA_TITLE",U="THEME_CONFIG_INGREDIENT_ITEM_CLASS_NAME",z="THEME_CONFIG_SHARE_CTA_ICON",q="THEME_CONFIG_MOBILE_BREAKPOINT",j="THEME_CONFIG_BUTTON_ALIGNMENT",V="THEME_CONFIG_URL_TEXT",Y="THEME_CONFIG_INTRO_TEXT",X=(t,e,n)=>(t=t[(e=Array.isArray(e)?e:e.split("."))[0]])&&e.length>1?X(t,e.slice(1),n):void 0===t?n:t;let J=null;const K=t=>{if(!J){const t=window.sessionStorage.getItem("shoppableRecipeConfig");J=t?JSON.parse(t):{}}switch(t){case R:return X(J,"colors.primary","#0e7a2b");case H:return X(J,"colors.secondary","#ffffff");case L:return X(J,"cta.borderRadius","5px");case F:return X(J,"cta.fontSize","25px");case G:return X(J,"cta.padding","17px 21px 16px 17px");case k:return X(J,"cta.margin","0 0 0 0");case B:return X(J,"identifiers.ingredientsContainerClassName","c-recipe-content-ingredients");case P:return X(J,"labels.shareTitle","Share");case U:return X(J,"identifiers.ingredientItemClassName","c-recipe-content-ingredients__list-item");case D:return X(J,"cta.height","50px");case z:{const t=X(J,"cta.shareIcon",null);if(!t||!t.contents)return null;if(X(t,"base64Encoded",!1)){return function(t){const e=atob(t),n=new Uint8Array(e.length);let o=0;const r=n.length;for(;o<r;o+=1)n[o]=e.charCodeAt(o);return String.fromCharCode(...new Uint16Array(n.buffer))}(t.contents)}break}case q:return X(J,"display.mobileBreakpoint","767px");case j:return X(J,"cta.alignment","left");case Y:return X(J,"labels.intro","Sharing ingredients list for");case V:return X(J,"labels.closingRemarks","See full cooking instructions at");default:return null}},Z=()=>{const t=document.querySelectorAll(`.${K(U)}`),e=t.length,n=[];let o=0;for(;o<e;o+=1){const e=t[o].textContent.replace(/(\r\n|\n|\t|\r)/gm,"");n.push(`â€¢ ${e}`)}return n.join("\n")};function Q(e){let n,o,r,i,u=e[1]&&function(e){let n;return{c(){n=l("span"),h(n,"slot","icon"),h(n,"aria-hidden","true")},m(t,o){s(t,n,o),n.innerHTML=e[1]},p:t,d(t){t&&c(n)}}}(e);return{c(){n=l("div"),o=l("sr-button"),u&&u.c(),this.c=t,p(o,"btntext",e[0]),p(o,"eventname","EVENT_SHARE_INGREDIENTS"),p(o,"iconname","ICON_TYPE_ADD"),h(n,"class","sr-widget")},m(t,c){s(t,n,c),a(n,o),u&&u.m(o,null),r||(i=d(o,"EVENT_SHARE_INGREDIENTS",e[2]),r=!0)},p(t,[e]){t[1]&&u.p(t,e),1&e&&p(o,"btntext",t[0])},i:t,o:t,d(t){t&&c(n),u&&u.d(),r=!1,i()}}}function W(t,e,n){const{url:o,recipeName:r}={recipeId:X(window,"digitalData.page.entity.id","RECIPE_ID_NOT_FOUND"),locale:X(document,"documentElement.lang","LOCALE_NOT_FOUND"),url:X(document,"digitalData.page.pageInfo.destinationURL",window.location.href),brandName:X(window,"digitalData.page.attributes.localBrand","LOCAL_BRAND_NOT_FOUND"),recipeName:X(window,"document.title","RECIPE_NAME_NOT_FOUND")};let{sharetitle:i="Share"}=e;const a=K(Y),s=K(V),c=`${a} ${r}`;let l={text:`${c}\n\n${Z()}\n\n${s}`,title:c,url:o};const u=K(z);return t.$$set=t=>{"sharetitle"in t&&n(0,i=t.sharetitle)},[i,u,function(){navigator.share?navigator.share(l).then((()=>{console.log("Share successful"),((t=null)=>{let e;t&&(e=document.body.classList.contains("blueprint-page")?`Shoppable Recipe - ${t} | SAAS`:`Shoppable Recipe - ${t}`);const n=new CustomEvent("sh_shoppable_recipe",{detail:{eventAction:"Share",eventLabel:`${e}`,eventValue:1,type:"trackEvent"}});document.dispatchEvent(n)})(r)})).catch((t=>{console.log(t)})):console.log("Share support unavaiable")}]}function tt(t){let e,n;return{c(){e=l("span"),n=u(t[0]),h(e,"data-testid","button-label")},m(t,o){s(t,e,o),a(e,n)},p(t,e){1&e&&function(t,e){e=""+e,t.data!==e&&(t.data=e)}(n,t[0])},d(t){t&&c(e)}}}function et(e){let n,o,r,i,p,f=e[0]&&tt(e);return{c(){n=l("button"),o=l("slot"),r=u(" "),f&&f.c(),this.c=t,h(o,"name","icon"),h(o,"aria-hidden","true")},m(t,c){s(t,n,c),a(n,o),a(n,r),f&&f.m(n,null),i||(p=d(n,"click",e[3]),i=!0)},p(t,[e]){t[0]?f?f.p(t,e):(f=tt(t),f.c(),f.m(n,null)):f&&(f.d(1),f=null)},i:t,o:t,d(t){t&&c(n),f&&f.d(),i=!1,p()}}}function nt(t,e,n){let{btntext:o="Button Text"}=e,{eventname:r=null}=e;const i=function(){if(!m)throw new Error("Function called outside component initialization");return m}(),a=t=>{i.dispatchEvent(new CustomEvent(t,{composed:!0}))};return t.$$set=t=>{"btntext"in t&&n(0,o=t.btntext),"eventname"in t&&n(1,r=t.eventname)},[o,r,a,()=>a(r)]}customElements.define("shoppable-recipe",class extends M{constructor(t){super();const e=document.createElement("style");e.textContent='*{box-sizing:border-box}.sr-widget{display:flex;justify-content:var(--button-position, "left")}sr-button{display:inline-flex;height:100%}sr-button span{display:inline-flex}',this.shadowRoot.appendChild(e),S(this,{target:this.shadowRoot,props:f(this.attributes),customElement:!0},W,Q,i,{sharetitle:0},null),t&&(t.target&&s(t.target,this,t.anchor),t.props&&(this.$set(t.props),A()))}static get observedAttributes(){return["sharetitle"]}get sharetitle(){return this.$$.ctx[0]}set sharetitle(t){this.$$set({sharetitle:t}),A()}});customElements.define("sr-button",class extends M{constructor(t){super();const e=document.createElement("style");e.textContent='button{font-size:var(--button-font-size, "26px");color:var(--color-secondary, #fff);background-color:var(--color--primary, #0e7a2b);border-radius:var(--button-border-radius, 6px);padding:var(--button-padding, 17px 21px 16px 17px);margin:var(--button-margin, 0);border:0;cursor:pointer;height:var(--button-height, 50px);line-height:var(--button-height, 50px);font-family:inherit;display:flex;align-items:center}button slot{display:inline-flex;margin-right:10px}',this.shadowRoot.appendChild(e),S(this,{target:this.shadowRoot,props:f(this.attributes),customElement:!0},nt,et,i,{btntext:0,eventname:1},null),t&&(t.target&&s(t.target,this,t.anchor),t.props&&(this.$set(t.props),A()))}static get observedAttributes(){return["btntext","eventname"]}get btntext(){return this.$$.ctx[0]}set btntext(t){this.$$set({btntext:t}),A()}get eventname(){return this.$$.ctx[1]}set eventname(t){this.$$set({eventname:t}),A()}});(()=>{if(((t="767px")=>{if(window&&window.matchMedia){const e=window.matchMedia(`(max-width: ${t}) and (orientation: portrait)`).matches,n=window.matchMedia("(max-width: ${mobileBreakpoint}) and (orientation: landscape)").matches;return/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)&&(e||n)}return!1})(K(q))){new MutationObserver((t=>{t.forEach((t=>{"childList"===t.type&&t.addedNodes.length>0&&t.addedNodes.forEach((t=>{if(t.getElementsByClassName(`${K(B)}`)&&!document.querySelector(`.${K(B)}`).classList.contains("c-share-recipe-loaded")){console.log("share recipe loaded successfully");const t=document.createElement("style");t.innerHTML=`shoppable-recipe {\n\t\t\t\t\t\t\t\t/* Border radius of the button. */\n\t\t\t\t\t\t\t\t--button-border-radius: ${K(L)};\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t/* Font size of the button. */\n\t\t\t\t\t\t\t\t--button-font-size: ${K(F)};\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t/* Padding for the button */\n\t\t\t\t\t\t\t\t--button-padding: ${K(G)};\n\n\t\t\t\t\t\t\t\t/* Margin for the button */\n\t\t\t\t\t\t\t\t--button-margin: ${K(k)};\n\n\t\t\t\t\t\t\t\t/* Height for the button */\n\t\t\t\t\t\t\t\t--button-height: ${K(D)};\n\n\t\t\t\t\t\t\t\t/* Alignment of the button */\n\t\t\t\t\t\t\t\t--button-position: ${K(j)};\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t/* Button background color */\n\t\t\t\t\t\t\t\t--color--primary: ${K(R)};\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t/* Button text color */\n\t\t\t\t\t\t\t\t--color-secondary: ${K(H)};\n\t\t\t\t\t\t\t}`;const e=K(B),n=document.querySelectorAll(`.${e}`),o=document.createElement("shoppable-recipe");o.setAttribute("sharetitle",K(P)),n[0].append(t),n[0].append(o),document.querySelector(`.${e}`).classList.add("c-share-recipe-loaded")}}))}))})).observe(document.querySelector("body"),{attributes:!0,childList:!0,subtree:!0,characterData:!1})}})()}();
//# sourceMappingURL=shoppable_recipe_widget_v1.js.map
